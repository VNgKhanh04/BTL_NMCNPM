@model List<BTL_NMCNPM.Models.Comment>
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
    var isAuthenticated = HttpContextAccessor.HttpContext.User.Identity.IsAuthenticated;
}

<h2>Danh sách bình luận</h2>

@if (TempData["Message"] != null)
{
    <div style="color: green;">@TempData["Message"]</div>
}
@if (TempData["Error"] != null)
{
    <div style="color: red;">@TempData["Error"]</div>
}

@if (isAuthenticated)
{ 
    <form asp-action="Add" asp-controller="Comment" method="post">
        <textarea name="Content" required maxlength="500" placeholder="Nhập bình luận..."></textarea>
        <button type="submit">Gửi</button>
    </form>
}
else
{
    <p>Bạn cần <a href="/Account/Login">đăng nhập</a> để bình luận.</p>
} 

<ul>
    @foreach (var comment in Model)
    {
        <li>@comment.Content - @comment.CreatedAt.ToString("dd/MM/yyyy HH:mm")</li>
    }
</ul>
